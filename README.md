# shells

git 地址
git clone https://github.com/kaimeng/shells.git

1. 如果系统无法直接连接网络，先设置系统代理 proxy.sh
2. 运行 sh kubernetes_init.sh nodex (nodex 是当前节点名)
3. 如果是 master 节点，运行 kubeadm_init.sh

修改ConfigMap的kube-system/kube-proxy中的config.conf，mode: “ipvs”
kubectl edit cm kube-proxy -n kube-system

之后重启各个节点上的kube-proxy pod：
kubectl get pod -n kube-system | grep kube-proxy | awk '{system("kubectl delete pod "$1" -n kube-system")}'


新节点加入 cluser
kubeadm join 10.136.21.110:6443 --token jmivz1.594bgbd19l2symze --discovery-token-ca-cert-hash sha256:fe853a5be89e6bfd8226ec022d1912c2358a8e3194388fb3a600a08ba3a27e89


dashboard token
eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJrdWJlcm5ldGVzLWRhc2hib2FyZC10b2tlbi1ieGZ6aiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6ImU1YmE3NTFiLWQ3ZWUtNDIwYi04YzI4LWEzMTRhYzAyZDZlYSIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTprdWJlcm5ldGVzLWRhc2hib2FyZCJ9.CxP_s0sJrswZAe5Jquoupr-KjQh_txsrJDlb7IJtk1PZBizYBxcKynrqhEctizyRrCHJ3lXvj96pJ89uQaOcpjmfTpLvb7Xcp-u_YC7ZynyDbD1tOyx8vNkVYJE1ymdpRHYBE-Zr3SwH1uj-7Oo0S9oCZkve-F-REljQiwtzjrHWsDes0zUtSF4sd2WcgQqHTBAhd1U9VxLIcHKrm4sHg2Ey0cTuTbsU1GChYdZuQPNN9VwMrUWlbqzZowf33QXjl8m8eymT0_OJOiraw82eKKTpYbZe316O6bbzTS2af8WdXY88JA52l4FJvG2api6Y-LMJo0i4NXLiNDj8IztFAw
